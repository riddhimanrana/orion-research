#!/bin/bash

# PVSG VidOR video directory
VID_DIR="/Users/yogeshatluru/orion-research/datasets/PVSG/VidOR/mnt/lustre/jkyang/CVPR23/openpvsg/data/vidor/videos"
# Output results directory
RESULTS_DIR="/Users/yogeshatluru/orion-research/results/pvsg_batch_1_100"
mkdir -p "$RESULTS_DIR"


# List of the first 100 video IDs from pvsg.json (train split)
VIDEO_IDS=(
"0001_4164158586"
"0003_3396832512"
"0003_6141007489"
"0004_11566980553"
"0005_2505076295"
"0006_2889117240"
"0008_6225185844"
"0008_8890945814"
"0010_8610561401"
"0018_3057666738"
"0018_4748191834"
"0020_10793023296"
"0020_5323209509"
"0021_2446450580"
"0021_4999665957"
"0024_5224805531"
"0026_2764832695"
"0027_4571353789"
"0028_3085751774"
"0028_4021064662"
"0029_5139813648"
"0029_5290336869"
"0034_2445168413"
"0036_5322122291"
"0039_6951351121"
"0040_3400840679"
"0045_5028176838"
"0046_11919433184"
"0047_3924742603"
"0049_4822747943"
"0051_3471449291"
"0051_3702633786"
"0052_3159914409"
"0052_5243493279"
"0053_5481024800"
"0053_5599511471"
"0054_2434595182"
"0054_2612939953"
"0054_2971876369"
"0054_3294458120"
"0054_5402337043"
"0057_7001078933"
"0059_6883644517"
"0061_7722027264"
"0062_6430774273"
"0063_3195040591"
"0065_5002914403"
"0065_5552271623"
"0066_5155578777"
"0069_2740320945"
"0069_6490763929"
"0071_10770292975"
"0072_2607471948"
"0075_11566764085"
"0078_4964516093"
"0081_3180520174"
"0083_2516506305"
"0086_2479290539"
"0089_3066966990"
"0089_7180987582"
"0096_5296138427"
"0098_4867754798"
"1000_2594144360"
"1000_3841894188"
"1000_4758375321"
"1000_4919726862"
"1000_6217587003"
"1000_6828150903"
"1000_8770650748"
"1001_4184282918"
"1001_5247398775"
"1001_7007447516"
"1001_9367589814"
"1002_4060588783"
"1002_5280626374"
"1002_5710083349"
"1002_7394250236"
"1002_8356293248"
"1005_10756878424"
"1005_4247712487"
"1005_4760962392"
"1005_5233182010"
"1005_5845450545"
"1005_6769262907"
"1005_7031128593"
"1005_7401573420"
"1005_8631926258"
"1006_2699087442"
"1006_2838844408"
"1006_3858520659"
"1006_4323033143"
"1006_4533035526"
"1006_4580824633"
"1006_5133435424"
"1006_7033407269"
"1006_7732995600"
"1007_3410092329"
"1007_6631583821"
"1007_7518834808"
"1008_13312922233"
)


# Ensure the script runs from the cloned code directory (separate from datasets)
cd /Users/yogeshatluru/orion-research || exit 1

for VID in "${VIDEO_IDS[@]}"
do
    VIDEO_PATH="$VID_DIR/$VID.mp4"
    EPISODE_ID="$VID"
    OUT_DIR="$RESULTS_DIR/$EPISODE_ID"
    mkdir -p "$OUT_DIR"
    echo "Processing $VIDEO_PATH ..."
    PYTHONPATH=/Users/yogeshatluru/orion-research python -m orion.cli.run_showcase --episode "$EPISODE_ID" --video "$VIDEO_PATH"
done
